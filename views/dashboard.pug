extends layout

include mixins

block scripts
  script.
    $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip(); 
    });

block content
  h1 #{state.title}
  br
  div.progress
    div.progress-bar.progress-bar-success.progress-bar-striped.active(
      role="progressbar" aria-valuenow= progress aria-valuemin= min_val 
      aria-valuemax= max_val style="width:" + progress + "%" 
    )
      span #{state.stories + passed}
  .container
    h2 #{state.dash_title}
    p
    - var enable_new = false;
    - var counter = 0;
    each chapter, index in chapters
      .panel-group
        .panel.panel-default
          .panel-heading 
            h4.panel-title.text-uppercase
              a(data-toggle="collapse" href="#collapse" + index) #{state[chapter]}
                if chapter !== 'demo'
                  span.badge(data-toggle="tooltip" data-placement="top" title= state.tooltip.trials) #{state.trials}
          div.panel-collapse.collapse(id="collapse" + index class= chapter === curr_chapter ? "in" : "")
            .list-group          
              each val in lesson_data
                if val.chapter === chapter
                  if val.user_stories !== 0 || val.name === 'demo' || enable_new
                    a.list-group-item(href="/lessons/" + val.name + "/" + val.subj target='_blank') #{val[lang].name}  &nbsp;
                      +dashb_subj_label(val.name, val[lang].subname)                      
                      +dashb_info_label(enable_new, state)
                      +dashb_count_badge(val.name, val.user_stories)                      
                      if val.name !== 'demo'
                        - counter++;
                      - enable_new = counter === passed ? true : false;  
                  else    
                    p.list-group-item.bg-secondary #{val[lang].name}  &nbsp;
                      +dashb_subj_label(val.name, val[lang].subname)
                      +dashb_count_badge(val.name, val.user_stories)
    h2 #{state.diploma}
    .panel-group          
      .panel.panel-default
        .panel-heading 
          h4.panel-title.text-uppercase
            a(data-toggle="collapse" href="#collapse5") Пройти
        div#collapse5.panel-collapse.collapse
          .list-group
            p.list-group-item Тести доступні у 
              a(href='/#prices' target='_blank') 
                strong Просунутому та Преміум 
              | акаунтах.
          
              
        